CREATE DATABASE IF NOT EXISTS carteira_sesi;
USE carteira_sesi;

CREATE TABLE IF NOT EXISTS responsavel (
    id_responsavel INT AUTO_INCREMENT PRIMARY KEY,
    nome VARCHAR(100) NOT NULL,
    telefone VARCHAR(20),
    email VARCHAR(100) NOT NULL,
    senha VARCHAR(100) NOT NULL
);


CREATE TABLE IF NOT EXISTS aluno (
    id_aluno INT AUTO_INCREMENT PRIMARY KEY,
    nome VARCHAR(100) NOT NULL,
    idade INT,
    turma VARCHAR(10),
    responsavel_id INT,
    email VARCHAR(100) NOT NULL,
    senha VARCHAR(100) NOT NULL,
    stts INT,
    FOREIGN KEY (responsavel_id) REFERENCES responsavel(id_responsavel)
);

CREATE TABLE IF NOT EXISTS porteiro (
    id_porteiro INT AUTO_INCREMENT PRIMARY KEY,
    nome VARCHAR(100) NOT NULL,
    email VARCHAR(100) NOT NULL,
    senha VARCHAR(100) NOT NULL
);


CREATE TABLE IF NOT EXISTS registro (
    id_registro INT AUTO_INCREMENT PRIMARY KEY,
    aluno_id INT,
    porteiro_id INT,
    tipo ENUM('Entrada', 'Sa√≠da'),
    data_hora DATETIME,
    FOREIGN KEY (aluno_id) REFERENCES aluno(id_aluno),
    FOREIGN KEY (porteiro_id) REFERENCES porteiro(id_porteiro)
);

CREATE TABLE IF NOT EXISTS supervisao (
	id_supervisao INT AUTO_INCREMENT PRIMARY KEY,
	email VARCHAR(100) NOT NULL,
	senha VARCHAR(100) NOT NULL
);